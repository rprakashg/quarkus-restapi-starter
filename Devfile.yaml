schemaVersion: 2.2.0
metadata:
  name: quarkus-restapi-starter
  version: 0.0.1
  provider: rprakashg
  website: https://rprakashg.github.cio
  displayName: quarkus restapi
  description: Rest APIs in Quarkus with Java
  icon: https://design.jboss.org/quarkus/logo/final/SVG/quarkus_icon_rgb_default.svg
  tags: [ 'Java', 'Quarkus', 'Rest', 'Api' ]
  projectType: 'quarkus'
  language: 'java'
starterProjects:
  - name: quarkus-restapi-starter
    git:
      checkoutFrom:
        revision: main
      remotes:
        origin: https://github.com/rprakashg/quarkus=restapi-starter.git
components:
  - name: mvn
      container:
        image: registry.access.redhat.com/ubi8/openjdk-11
        memoryLimit: 512Mi ## default app nowhere needs this but leaving room for expansion.
        mountSources: true
        volumeMounts:
          - name: m2
            path: /home/user/.m2
        endpoints:
          - name: 'http'
            targetPort: 8080
  - name: m2
    volume:
      size: 3Gi
  - name: tools
      container:
        image:
          memoryLimit: 512Mi
          mountSources: true

commands:
  - id: compile
    exec:
      component: mvn
      commandLine: 'mvn -Dmaven.repo.local=/home/user/.m2/repository compile'
      workingDir: $PROJECTS_ROOT
  - id: test
    exec:
      component: mvn
      commandLine: './mvnw verify -Dquarkus.http.test-host=1.2.3.4 -Dquarkus.http.test-port=4321'
      workingDir: $PROJECTS_ROOT
  - id: run
    exec:
      component: mvn
      commandLine: 'mvn -Dmaven.repo.local=/home/user/.m2/repository quarkus:dev -Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager'
      hotReloadCapable: true
      group:
        kind: run
        isDefault: true
      workingDir: $PROJECTS_ROOT
  - id: debug
    exec:
      component: mvn
      commandLine: 'mvn -Dmaven.repo.local=/home/user/.m2/repository quarkus:dev -Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager -Ddebug=${DEBUG_PORT}'
      hotReloadCapable: true
      group:
        kind: debug
        isDefault: true
      workingDir: $PROJECTS_ROOT


